@using Adaplio.Frontend.Services

<MudCard Class="invalid-invite-card" Elevation="2">
    <MudCardHeader>
        <CardHeaderAvatar>
            <MudAvatar Color="Color.Error" Size="Size.Large">
                <MudIcon Icon="@Icons.Material.Filled.ErrorOutline" />
            </MudAvatar>
        </CardHeaderAvatar>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">Invitation Issue</MudText>
            <MudText Typo="Typo.body2" Color="Color.Default">
                There's a problem with this invitation
            </MudText>
        </CardHeaderContent>
    </MudCardHeader>

    <MudCardContent>
        <MudStack Spacing="3">
            <!-- Error Message -->
            <MudAlert Severity="Severity.Error">
                <MudText Typo="Typo.body1">
                    @ErrorMessage
                </MudText>
            </MudAlert>

            <!-- Common Solutions -->
            <MudText Typo="Typo.subtitle2">What you can try:</MudText>
            <MudList T="string" Dense="true" Class="solution-steps">
                <MudListItem T="string" Icon="@Icons.Material.Filled.Refresh">
                    <div>
                        <MudText Typo="Typo.body2"><strong>Check the invitation again</strong></MudText>
                        <MudText Typo="Typo.caption" Color="Color.Default">
                            Make sure you entered the correct code or scanned the right QR code
                        </MudText>
                    </div>
                </MudListItem>
                <MudListItem T="string" Icon="@Icons.Material.Filled.ContactSupport">
                    <div>
                        <MudText Typo="Typo.body2"><strong>Contact your trainer</strong></MudText>
                        <MudText Typo="Typo.caption" Color="Color.Default">
                            Ask them to send you a new invitation link
                        </MudText>
                    </div>
                </MudListItem>
                <MudListItem T="string" Icon="@Icons.Material.Filled.Help">
                    <div>
                        <MudText Typo="Typo.body2"><strong>Need help?</strong></MudText>
                        <MudText Typo="Typo.caption" Color="Color.Default">
                            Contact our support team for assistance
                        </MudText>
                    </div>
                </MudListItem>
            </MudList>

            <!-- Support Contact -->
            <MudPaper Class="pa-3 support-info" Elevation="1">
                <MudStack Row AlignItems="AlignItems.Center" Spacing="2">
                    <MudIcon Icon="@Icons.Material.Filled.Support" Color="Color.Primary" />
                    <div class="flex-grow-1">
                        <MudText Typo="Typo.body2"><strong>Need Support?</strong></MudText>
                        <MudText Typo="Typo.caption" Color="Color.Default">
                            Email us at support@adaplio.com or call (555) 123-4567
                        </MudText>
                    </div>
                </MudStack>
            </MudPaper>
        </MudStack>
    </MudCardContent>

    <MudCardActions Class="justify-space-between pa-4">
        <MudButton Variant="Variant.Outlined"
                 Color="Color.Primary"
                 StartIcon="@Icons.Material.Filled.ArrowBack"
                 OnClick="OnRetry">
            Try Again
        </MudButton>
        <MudButton Variant="Variant.Text"
                 Color="Color.Default"
                 StartIcon="@Icons.Material.Filled.Home"
                 Href="/">
            Go Home
        </MudButton>
    </MudCardActions>
</MudCard>

<style>
.invalid-invite-card {
    max-width: 600px;
    margin: 0 auto;
}

.solution-steps ::deep .mud-list-item {
    padding-left: 8px;
    padding-right: 8px;
    margin-bottom: 8px;
}

.solution-steps ::deep .mud-list-item-icon {
    color: var(--mud-palette-info);
}

.support-info {
    background: rgba(var(--mud-palette-info-rgb), 0.05);
    border: 1px solid rgba(var(--mud-palette-info-rgb), 0.1);
}
</style>

@code {
    [Parameter]
    public string ErrorMessage { get; set; } = "The invitation is invalid or has expired.";

    [Parameter]
    public EventCallback OnRetry { get; set; }
}